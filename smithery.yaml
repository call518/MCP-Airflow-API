
## Smithery configuration for MCP Airflow API server
## Docs: https://smithery.ai/docs/config#smitheryyaml
## This file defines how Smithery (and Smithery-compatible MCP client launchers)
## can start the Airflow MCP server via stdio.

name: mcp-airflow-api
description: "MCP server exposing Apache Airflow cluster management & monitoring tools."
homepage: https://github.com/call518/MCP-Airflow-API
license: MIT
tags:
  - airflow
  - dag
  - cluster
  - monitoring
  - mcp

startCommand:
  type: stdio
  # User-supplied configuration schema mapped to environment variables.
  configSchema:
    type: object
    required:
      - AIRFLOW_API_URL
      - AIRFLOW_API_USERNAME
      - AIRFLOW_API_PASSWORD
      - AIRFLOW_LOG_LEVEL
    properties:
      AIRFLOW_API_URL:
        type: string
        description: "Airflow REST API base URL (e.g. http://localhost:8080/api/v1)"
        default: http://localhost:8080/api/v1
        secret: true
      AIRFLOW_API_USERNAME:
        type: string
        description: "Airflow API username"
        default: airflow
        secret: true
      AIRFLOW_API_PASSWORD:
        type: string
        description: "Airflow API password"
        default: airflow
        secret: true
      AIRFLOW_LOG_LEVEL:
        type: string
        description: "Log level for MCP server (DEBUG, INFO, WARNING, ERROR, CRITICAL)"
        default: INFO
  commandFunction: |-
    (config) => {
      // Always use the installed console script from PyPI.
      // (Smithery environment must have already run: pip install mcp-airflow-api[latest|==version])
      const env = {
        AIRFLOW_API_URL: config.AIRFLOW_API_URL,
        AIRFLOW_API_USERNAME: config.AIRFLOW_API_USERNAME,
        AIRFLOW_API_PASSWORD: config.AIRFLOW_API_PASSWORD,
        AIRFLOW_LOG_LEVEL: config.AIRFLOW_LOG_LEVEL || 'INFO',
      };
      const args = ['--log-level', env.AIRFLOW_LOG_LEVEL];
      return { command: 'mcp-airflow-api', args, env };
    }
  exampleConfig:
    AIRFLOW_API_URL: http://localhost:8080/api/v1
    AIRFLOW_API_USERNAME: airflow
    AIRFLOW_API_PASSWORD: airflow
    AIRFLOW_LOG_LEVEL: INFO

## Notes:
## - Set AIRFLOW_API_PASSWORD via Smithery secret storage if available.
## - Adjust AIRFLOW_API_URL for your environment.
## - Set AIRFLOW_LOG_LEVEL to control logging verbosity (DEBUG, INFO, etc).
## - Ensure the hosting environment installs the package: pip install mcp-airflow-api (optionally pin a version).
